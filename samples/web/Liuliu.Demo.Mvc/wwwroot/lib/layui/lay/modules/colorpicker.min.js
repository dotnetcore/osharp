layui.define("jquery",function(e){"use strict";function y(e){var i={h:0,s:0,b:0},o=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),t=r-o;return i.b=r,i.s=0!=r?255*t/r:0,0!=i.s?e.r==r?i.h=(e.g-e.b)/t:e.g==r?i.h=2+(e.b-e.r)/t:i.h=4+(e.r-e.g)/t:i.h=-1,r==o&&(i.h=0),i.h*=60,i.h<0&&(i.h+=360),i.s*=100/255,i.b*=100/255,i}function x(e){var i,o,r,t={},n=e.h,l=255*e.s/100,c=255*e.b/100;return 0==l?t.r=t.g=t.b=c:(r=n%60*((i=c)-(o=(255-l)*c/255))/60,360==n&&(n=0),n<60?(t.r=i,t.b=o,t.g=o+r):n<120?(t.g=i,t.b=o,t.r=i-r):n<180?(t.g=i,t.r=o,t.b=o+r):n<240?(t.b=i,t.r=o,t.g=i-r):n<300?(t.b=i,t.g=o,t.r=o+r):n<360?(t.r=i,t.g=o,t.b=i-r):(t.r=0,t.g=0,t.b=0)),{r:Math.round(t.r),g:Math.round(t.g),b:Math.round(t.b)}}function u(e){var i=x(e),o=[i.r.toString(16),i.g.toString(16),i.b.toString(16)];return P.each(o,function(e,i){1==i.length&&(o[e]="0"+i)}),o.join("")}function C(e){var i=e.match(/[0-9]{1,3}/g)||[];return{r:i[0],g:i[1],b:i[2]}}function t(e){this.index=++i.index,this.config=P.extend({},this.config,i.config,e),this.render()}var P=layui.jquery,i={config:{},index:layui.colorpicker?layui.colorpicker.index+1e4:0,set:function(e){var i=this;return i.config=P.extend({},i.config,e),i},on:function(e,i){return layui.onevent.call(this,"colorpicker",e,i)}},n="layui-colorpicker",l=".layui-colorpicker-main",B="layui-icon-down",w="layui-icon-close",D="layui-colorpicker-trigger-span",E="layui-colorpicker-trigger-i",H="layui-colorpicker-side-slider",W="layui-colorpicker-basis",j="layui-colorpicker-alpha-bgcolor",F="layui-colorpicker-alpha-slider",L="layui-colorpicker-basis-cursor",M="layui-colorpicker-main-input",Y=P(window),c=P(document);t.prototype.config={color:"",size:null,alpha:!1,format:"hex",predefine:!1,colors:["#009688","#5FB878","#1E9FFF","#FF5722","#FFB800","#01AAED","#999","#c00","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585","rgb(0, 186, 189)","rgb(255, 120, 0)","rgb(250, 212, 0)","#393D49","rgba(0,0,0,.5)","rgba(255, 69, 0, 0.68)","rgba(144, 240, 144, 0.5)","rgba(31, 147, 255, 0.73)"]},t.prototype.render=function(){var e,i=this,o=i.config,r=P(['<div class="layui-unselect layui-colorpicker">',"<span "+("rgb"==o.format&&o.alpha?'class="layui-colorpicker-trigger-bgcolor"':"")+">",'<span class="layui-colorpicker-trigger-span" ','lay-type="'+("rgb"==o.format?o.alpha?"rgba":"torgb":"")+'" ','style="'+(e="",o.color?(e=o.color,3<(o.color.match(/[0-9]{1,3}/g)||[]).length&&(o.alpha&&"rgb"==o.format||(e="#"+u(y(C(o.color))))),"background: "+e):e)+'">','<i class="layui-icon layui-colorpicker-trigger-i '+(o.color?B:w)+'"></i>',"</span>","</span>","</div>"].join("")),t=P(o.elem);o.size&&r.addClass("layui-colorpicker-"+o.size),t.addClass("layui-inline").html(i.elemColorBox=r),i.color=i.elemColorBox.find("."+D)[0].style.background,i.events()},t.prototype.renderPicker=function(){var e=this,i=e.config,o=e.elemColorBox[0],r=e.elemPicker=P(['<div id="layui-colorpicker'+e.index+'" data-index="'+e.index+'" class="layui-anim layui-anim-upbit layui-colorpicker-main">','<div class="layui-colorpicker-main-wrapper">','<div class="layui-colorpicker-basis">','<div class="layui-colorpicker-basis-white"></div>','<div class="layui-colorpicker-basis-black"></div>','<div class="layui-colorpicker-basis-cursor"></div>',"</div>",'<div class="layui-colorpicker-side">','<div class="layui-colorpicker-side-slider"></div>',"</div>","</div>",'<div class="layui-colorpicker-main-alpha '+(i.alpha?"layui-show":"")+'">','<div class="layui-colorpicker-alpha-bgcolor">','<div class="layui-colorpicker-alpha-slider"></div>',"</div>","</div>",function(){if(i.predefine){var o=['<div class="layui-colorpicker-main-pre">'];return layui.each(i.colors,function(e,i){o.push(['<div class="layui-colorpicker-pre'+(3<(i.match(/[0-9]{1,3}/g)||[]).length?" layui-colorpicker-pre-isalpha":"")+'">','<div style="background:'+i+'"></div>',"</div>"].join(""))}),o.push("</div>"),o.join("")}return""}(),'<div class="layui-colorpicker-main-input">','<div class="layui-inline">','<input type="text" class="layui-input">',"</div>",'<div class="layui-btn-container">','<button class="layui-btn layui-btn-primary layui-btn-sm" colorpicker-events="clear">清空</button>','<button class="layui-btn layui-btn-sm" colorpicker-events="confirm">确定</button>',"</div","</div>","</div>"].join(""));e.elemColorBox.find("."+D)[0],P(l)[0]&&P(l).data("index")==e.index?e.removePicker(t.thisElemInd):(e.removePicker(t.thisElemInd),P("body").append(r)),t.thisElemInd=e.index,t.thisColor=o.style.background,e.position(),e.pickerEvents()},t.prototype.removePicker=function(e){return this.config,P("#layui-colorpicker"+(e||this.index)).remove(),this},t.prototype.position=function(){function e(e){return e=e?"scrollLeft":"scrollTop",document.body[e]|document.documentElement[e]}function i(e){return document.documentElement[e?"clientWidth":"clientHeight"]}var o=this.config,r=this.bindElem||this.elemColorBox[0],t=this.elemPicker[0],n=r.getBoundingClientRect(),l=t.offsetWidth,c=t.offsetHeight,a=n.left,s=n.bottom;s+=5,(a-=(l-r.offsetWidth)/2)+l+5>i("width")?a=i("width")-l-5:a<5&&(a=5),s+c+5>i()&&(s=n.top>c?n.top-c:i()-c,s-=10),o.position&&(t.style.position=o.position),t.style.left=a+("fixed"===o.position?0:e(1))+"px",t.style.top=s+("fixed"===o.position?0:e())+"px"},t.prototype.val=function(){var e,i,o,r,t=this,n=(t.config,t.elemColorBox.find("."+D)),l=t.elemPicker.find("."+M),c=n[0].style.backgroundColor;c?(e=y(C(c)),i=n.attr("lay-type"),t.select(e.h,e.s,e.b),"torgb"===i&&l.find("input").val(c),"rgba"===i&&(o=C(c),3==(c.match(/[0-9]{1,3}/g)||[]).length?(l.find("input").val("rgba("+o.r+", "+o.g+", "+o.b+", 1)"),t.elemPicker.find("."+F).css("left",280)):(l.find("input").val(c),r=280*c.slice(c.lastIndexOf(",")+1,c.length-1),t.elemPicker.find("."+F).css("left",r)),t.elemPicker.find("."+j)[0].style.background="linear-gradient(to right, rgba("+o.r+", "+o.g+", "+o.b+", 0), rgb("+o.r+", "+o.g+", "+o.b+"))")):(t.select(0,100,100),l.find("input").val(""),t.elemPicker.find("."+j)[0].style.background="",t.elemPicker.find("."+F).css("left",280))},t.prototype.side=function(){function f(e,i,o,r){l.select(e,i,o);var t,n=x({h:e,s:i,b:o});k.addClass(B).removeClass(w),a[0].style.background="rgb("+n.r+", "+n.g+", "+n.b+")","torgb"===s&&l.elemPicker.find("."+M).find("input").val("rgb("+n.r+", "+n.g+", "+n.b+")"),"rgba"===s&&(t=280*r,g.css("left",t),l.elemPicker.find("."+M).find("input").val("rgba("+n.r+", "+n.g+", "+n.b+", "+r+")"),a[0].style.background="rgba("+n.r+", "+n.g+", "+n.b+", "+r+")",p[0].style.background="linear-gradient(to right, rgba("+n.r+", "+n.g+", "+n.b+", 0), rgb("+n.r+", "+n.g+", "+n.b+"))"),c.change&&c.change(l.elemPicker.find("."+M).find("input").val())}function i(e){P("#LAY-colorpicker-moving")[0]||P("body").append(r),r.on("mousemove",e),r.on("mouseup",function(){r.remove()}).on("mouseleave",function(){r.remove()})}var l=this,c=l.config,a=l.elemColorBox.find("."+D),s=a.attr("lay-type"),d=l.elemPicker.find(".layui-colorpicker-side"),e=l.elemPicker.find("."+H),u=l.elemPicker.find("."+W),n=l.elemPicker.find("."+L),p=l.elemPicker.find("."+j),g=l.elemPicker.find("."+F),h=e[0].offsetTop/180*360,v=100-(n[0].offsetTop+3)/180*100,m=(n[0].offsetLeft+3)/260*100,b=Math.round(g[0].offsetLeft/280*100)/100,k=l.elemColorBox.find("."+E),o=l.elemPicker.find(".layui-colorpicker-pre").children("div"),r=P(['<div class="layui-auxiliar-moving" id="LAY-colorpicker-moving"></div'].join(""));e.on("mousedown",function(e){var t=this.offsetTop,n=e.clientY;i(function(e){var i=t+(e.clientY-n),o=d[0].offsetHeight;i<0&&(i=0),o<i&&(i=o);var r=i/180*360;f(h=r,m,v,b),e.preventDefault()}),e.preventDefault()}),d.on("click",function(e){var i=e.clientY-P(this).offset().top;i<0&&(i=0),i>this.offsetHeight&&(i=this.offsetHeight);var o=i/180*360;f(h=o,m,v,b),e.preventDefault()}),n.on("mousedown",function(e){var c=this.offsetTop,a=this.offsetLeft,s=e.clientY,d=e.clientX;layui.stope(e),i(function(e){var i=c+(e.clientY-s),o=a+(e.clientX-d),r=u[0].offsetHeight-3,t=u[0].offsetWidth-3;i<-3&&(i=-3),r<i&&(i=r),o<-3&&(o=-3),t<o&&(o=t);var n=(o+3)/260*100,l=100-(i+3)/180*100;f(h,m=n,v=l,b),e.preventDefault()}),e.preventDefault()}),u.on("mousedown",function(e){var i=e.clientY-P(this).offset().top-3+Y.scrollTop(),o=e.clientX-P(this).offset().left-3+Y.scrollLeft();i<-3&&(i=-3),i>this.offsetHeight-3&&(i=this.offsetHeight-3),o<-3&&(o=-3),o>this.offsetWidth-3&&(o=this.offsetWidth-3);var r=(o+3)/260*100,t=100-(i+3)/180*100;f(h,m=r,v=t,b),e.preventDefault(),n.trigger(e,"mousedown")}),g.on("mousedown",function(e){var t=this.offsetLeft,n=e.clientX;i(function(e){var i=t+(e.clientX-n),o=p[0].offsetWidth;i<0&&(i=0),o<i&&(i=o);var r=Math.round(i/280*100)/100;f(h,m,v,b=r),e.preventDefault()}),e.preventDefault()}),p.on("click",function(e){var i=e.clientX-P(this).offset().left;i<0&&(i=0),i>this.offsetWidth&&(i=this.offsetWidth);var o=Math.round(i/280*100)/100;f(h,m,v,b=o),e.preventDefault()}),o.each(function(){P(this).on("click",function(){P(this).parent(".layui-colorpicker-pre").addClass("selected").siblings().removeClass("selected");var e=this.style.backgroundColor,i=y(C(e)),o=e.slice(e.lastIndexOf(",")+1,e.length-1);h=i.h,m=i.s,v=i.b,3==(e.match(/[0-9]{1,3}/g)||[]).length&&(o=1),b=o,f(i.h,i.s,i.b,o)})})},t.prototype.select=function(e,i,o,r){var t=this,n=(t.config,u({h:e,s:100,b:100})),l=u({h:e,s:i,b:o}),c=e/360*180,a=180-o/100*180-3,s=i/100*260-3;t.elemPicker.find("."+H).css("top",c),t.elemPicker.find("."+W)[0].style.background="#"+n,t.elemPicker.find("."+L).css({top:a,left:s}),"change"!==r&&t.elemPicker.find("."+M).find("input").val("#"+l)},t.prototype.pickerEvents=function(){var a=this,s=a.config,d=a.elemColorBox.find("."+D),f=a.elemPicker.find("."+M+" input"),o={clear:function(e){d[0].style.background="",a.elemColorBox.find("."+E).removeClass(B).addClass(w),a.color="",s.done&&s.done(""),a.removePicker()},confirm:function(e,i){var o,r,t,n=f.val(),l=n,c={};return-1<n.indexOf(",")?(c=y(C(n)),a.select(c.h,c.s,c.b),d[0].style.background=l="#"+u(c),3<(n.match(/[0-9]{1,3}/g)||[]).length&&"rgba"===d.attr("lay-type")&&(o=280*n.slice(n.lastIndexOf(",")+1,n.length-1),a.elemPicker.find("."+F).css("left",o),l=d[0].style.background=n)):(3==(r=-1<(r=n).indexOf("#")?r.substring(1):r).length&&(r=(t=r.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),r=parseInt(r,16),c=y({r:r>>16,g:(65280&r)>>8,b:255&r}),d[0].style.background=l="#"+u(c),a.elemColorBox.find("."+E).removeClass(w).addClass(B)),"change"===i?(a.select(c.h,c.s,c.b,i),void(s.change&&s.change(l))):(a.color=n,s.done&&s.done(n),void a.removePicker())}};a.elemPicker.on("click","*[colorpicker-events]",function(){var e=P(this),i=e.attr("colorpicker-events");o[i]&&o[i].call(this,e)}),f.on("keyup",function(e){var i=P(this);o.confirm.call(this,i,13===e.keyCode?null:"change")})},t.prototype.events=function(){var o=this,e=o.config,r=o.elemColorBox.find("."+D);o.elemColorBox.on("click",function(){o.renderPicker(),P(l)[0]&&(o.val(),o.side())}),e.elem[0]&&!o.elemColorBox[0].eventHandler&&(c.on("click",function(e){var i;P(e.target).hasClass(n)||P(e.target).parents("."+n)[0]||P(e.target).hasClass(l.replace(/\./g,""))||P(e.target).parents(l)[0]||!o.elemPicker||(o.color?(i=y(C(o.color)),o.select(i.h,i.s,i.b)):o.elemColorBox.find("."+E).removeClass(B).addClass(w),r[0].style.background=o.color||"",o.removePicker())}),Y.on("resize",function(){return!(!o.elemPicker||!P(l)[0])&&void o.position()}),o.elemColorBox[0].eventHandler=!0)},i.render=function(e){var i=new t(e);return function(){return{config:this.config}}.call(i)},e("colorpicker",i)});